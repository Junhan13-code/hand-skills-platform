<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hand Skills Learning Platform</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #4361ee;
            --secondary: #3f37c9;
            --accent: #4cc9f0;
            --light: #f8f9fa;
            --dark: #212529;
            --gray: #6c757d;
            --success: #4ade80;
            --warning: #facc15;
            --danger: #f87171;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }

        body {
            background-color: #f5f7fb;
            color: var(--dark);
            line-height: 1.6;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header Styles */
        header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 2rem 0;
            text-align: center;
            margin-bottom: 2rem;
        }

        header h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }

        header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        /* Admin Login Button */
        .admin-login {
            position: absolute;
            top: 20px;
            right: 20px;
            z-index: 100;
        }

        .admin-btn {
            background: rgba(0,0,0,0.3);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            transition: var(--transition);
        }

        .admin-btn:hover {
            background: rgba(0,0,0,0.5);
        }

        /* Admin Panel */
        .admin-panel {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            z-index: 1000;
            display: none;
            justify-content: center;
            align-items: center;
        }

        .admin-content {
            background: white;
            width: 90%;
            max-width: 1000px;
            max-height: 90vh;
            border-radius: 10px;
            padding: 2rem;
            overflow-y: auto;
        }

        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--light);
        }

        .close-admin {
            background: var(--danger);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 5px;
            cursor: pointer;
        }

        /* NEW STYLING FOR ADMIN PANEL */
        .admin-dashboard {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            z-index: 1000;
            display: none;
            justify-content: center;
            align-items: center;
        }

        .admin-content-new {
            background: white;
            width: 90%;
            max-width: 1200px;
            max-height: 90vh;
            border-radius: 10px;
            padding: 2rem;
            overflow-y: auto;
        }

        .admin-header-new {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--light);
        }

        .logout-btn {
            background: var(--danger);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 5px;
            cursor: pointer;
        }

        .admin-content-new-inner {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 2rem;
        }

        /* Navigation Panel */
        .nav-panel {
            background: white;
            border-radius: 10px;
            padding: 1.5rem;
            box-shadow: var(--shadow);
        }

        .nav-panel h3 {
            margin-bottom: 1.2rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid var(--light);
        }

        .nav-item {
            padding: 0.8rem;
            margin-bottom: 0.5rem;
            border-radius: 5px;
            cursor: pointer;
            transition: var(--transition);
        }

        .nav-item:hover, .nav-item.active {
            background: var(--primary);
            color: white;
        }

        /* Main Content Area */
        .main-content-area {
            background: white;
            border-radius: 10px;
            padding: 2rem;
            box-shadow: var(--shadow);
            max-height: 70vh;
            overflow-y: auto;
        }

        .section-title {
            font-size: 1.5rem;
            color: var(--primary);
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid var(--light);
        }

        .skill-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 1.5rem;
        }

        .skill-card {
            border: 1px solid var(--light);
            border-radius: 8px;
            padding: 1.2rem;
            cursor: pointer;
            transition: var(--transition);
        }

        .skill-card:hover {
            border-color: var(--primary);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }

        .skill-card h4 {
            margin-bottom: 0.5rem;
            color: var(--primary);
        }

        .skill-actions {
            margin-top: 1rem;
            display: flex;
            gap: 0.5rem;
        }

        .action-btn {
            padding: 0.4rem 0.8rem;
            border-radius: 4px;
            border: none;
            cursor: pointer;
            font-size: 0.9rem;
        }

        .edit-btn {
            background: var(--warning);
            color: white;
        }

        .delete-btn {
            background: var(--danger);
            color: white;
        }

        /* Edit Form */
        .edit-form {
            display: none;
        }

        .form-row {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.2rem;
        }

        .form-col {
            flex: 1;
        }

        input[type="text"],
        textarea {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid #ddd;
            border-radius: 5px;
            resize: vertical;
            min-height: 100px;
        }

        .form-actions {
            display: flex;
            justify-content: flex-end;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        /* Steps Editor */
        .steps-editor {
            margin-top: 1.5rem;
        }

        .step-item {
            border: 1px solid var(--light);
            border-radius: 5px;
            padding: 1rem;
            margin-bottom: 1rem;
        }

        .step-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.8rem;
        }

        .step-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }

        .add-step-btn {
            margin-top: 1rem;
            background: var(--success);
            color: white;
        }

        /* Quiz Editor */
        .quiz-editor {
            margin-top: 1.5rem;
        }

        .quiz-question {
            border: 1px solid var(--light);
            border-radius: 5px;
            padding: 1rem;
            margin-bottom: 1rem;
        }

        .quiz-options {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1rem;
        }

        .add-quiz-btn {
            margin-top: 1rem;
            background: var(--success);
            color: white;
        }

        /* Original User Interface Styles */
        main {
            margin-bottom: 3rem;
        }

        .skill-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }

        .skill-card-ui {
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: var(--transition);
            cursor: pointer;
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        .skill-card-ui:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
        }

        .skill-icon {
            background: linear-gradient(135deg, var(--primary), var(--accent));
            color: white;
            font-size: 3rem;
            height: 150px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .skill-content {
            padding: 1.5rem;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }

        .skill-name {
            font-size: 1.5rem;
            margin-bottom: 0.75rem;
            color: var(--primary);
        }

        .skill-desc {
            color: var(--gray);
            flex-grow: 1;
        }

        .skill-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 0.75rem;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            margin-top: 1rem;
            transition: var(--transition);
        }

        .skill-btn:hover {
            background: var(--secondary);
        }

        .skill-detail {
            background: white;
            border-radius: 10px;
            padding: 2rem;
            box-shadow: var(--shadow);
            margin-top: 1.5rem;
            display: none;
        }

        .skill-header {
            display: flex;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--light);
        }

        .skill-header i {
            font-size: 2.5rem;
            margin-right: 1rem;
            color: var(--primary);
        }

        .skill-header h2 {
            font-size: 2rem;
            color: var(--dark);
        }

        .skill-section {
            margin-bottom: 2.5rem;
        }

        .section-title-ui {
            font-size: 1.5rem;
            color: var(--primary);
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid var(--light);
        }

        .tools-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1rem;
        }

        .tool-item {
            background: var(--light);
            border-radius: 8px;
            padding: 1rem;
            text-align: center;
            transition: var(--transition);
        }

        .tool-item:hover {
            background: var(--primary);
            color: white;
        }

        .tool-item i {
            font-size: 1.8rem;
            margin-bottom: 0.5rem;
            color: var(--primary);
        }

        .tool-item:hover i {
            color: white;
        }

        .steps-container {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .step-card {
            display: flex;
            gap: 1.5rem;
            background: var(--light);
            border-radius: 8px;
            overflow: hidden;
        }

        .step-image {
            width: 200px;
            height: 150px;
            object-fit: cover;
        }

        .step-content {
            padding: 1.2rem;
            flex-grow: 1;
        }

        .step-title {
            font-size: 1.2rem;
            margin-bottom: 0.5rem;
            color: var(--primary);
        }

        .theory-content {
            background: var(--light);
            padding: 1.5rem;
            border-radius: 8px;
            line-height: 1.8;
        }

        .quiz-container {
            background: var(--light);
            padding: 1.5rem;
            border-radius: 8px;
        }

        .question {
            margin-bottom: 1.5rem;
        }

        .question-text {
            font-weight: 600;
            margin-bottom: 0.75rem;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .option {
            display: flex;
            align-items: center;
            padding: 0.75rem;
            background: white;
            border-radius: 5px;
            cursor: pointer;
            transition: var(--transition);
        }

        .option:hover {
            background: #e9ecef;
        }

        .option.selected {
            background: var(--primary);
            color: white;
        }

        .quiz-result {
            margin-top: 1.5rem;
            padding: 1rem;
            border-radius: 5px;
            text-align: center;
            font-weight: 600;
        }

        .quiz-result.correct {
            background: var(--success);
            color: white;
        }

        .quiz-result.incorrect {
            background: var(--danger);
            color: white;
        }

        .quiz-nav {
            display: flex;
            justify-content: space-between;
            margin-top: 1.5rem;
        }

        .back-btn {
            background: var(--gray);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
        }

        footer {
            background: var(--dark);
            color: white;
            text-align: center;
            padding: 1.5rem 0;
            margin-top: 3rem;
        }

        .loading {
            text-align: center;
            padding: 2rem;
            font-size: 1.2rem;
            color: var(--gray);
        }

        /* Responsive Design */
        @media (max-width: 992px) {
            .admin-content-new-inner {
                grid-template-columns: 1fr;
            }
            .nav-panel {
                margin-bottom: 2rem;
            }
        }
        @media (max-width: 768px) {
            .step-card {
                flex-direction: column;
            }
            
            .step-image {
                width: 100%;
                height: 200px;
            }
            
            .skill-header {
                flex-direction: column;
                text-align: center;
            }
            
            .skill-header i {
                margin-right: 0;
                margin-bottom: 1rem;
            }
            
            .admin-login {
                position: static;
                text-align: center;
                margin-top: 1rem;
            }
            
            .form-row {
                flex-direction: column;
                gap: 0;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1><i class="fas fa-tools"></i> Hand Skills Learning Platform</h1>
            <p>Master essential hands-on skills with step-by-step guidance</p>
        </div>
        <div class="admin-login">
            <button class="admin-btn" id="adminLoginBtn"><i class="fas fa-lock"></i> Admin Login</button>
        </div>
    </header>

    <!-- NEW ADMIN PANEL STRUCTURE -->
    <div class="admin-dashboard" id="adminDashboard">
        <div class="admin-content-new">
            <div class="admin-header-new">
                <h1><i class="fas fa-tools"></i> Hand Skills Learning Platform - Admin Panel</h1>
                <button class="logout-btn" onclick="logout()">Logout</button>
            </div>
            <div class="admin-content-new-inner">
                <div class="nav-panel">
                    <h3>Navigation</h3>
                    <div class="nav-item active" onclick="showSection('dashboard')">Dashboard</div>
                    <div class="nav-item" onclick="showSection('skills')">Manage Skills</div>
                    <div class="nav-item" onclick="showSection('users')">Manage Users</div>
                    <div class="nav-item" onclick="showSection('settings')">Settings</div>
                </div>
                <div class="main-content-area">
                    <!-- Dashboard Section -->
                    <div id="dashboard-section" class="section">
                        <h2 class="section-title">Dashboard Overview</h2>
                        <p>Welcome to the Hand Skills Learning Platform Admin Panel. From here you can manage skills, content, and user access.</p>
                        <div style="margin-top: 2rem; display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem;">
                            <div style="background: var(--light); padding: 1.5rem; border-radius: 8px; text-align: center;">
                                <i class="fas fa-tools" style="font-size: 2.5rem; color: var(--primary); margin-bottom: 1rem;"></i>
                                <h3>5 Skills</h3>
                                <p>Total skills in the system</p>
                            </div>
                            <div style="background: var(--light); padding: 1.5rem; border-radius: 8px; text-align: center;">
                                <i class="fas fa-users" style="font-size: 2.5rem; color: var(--primary); margin-bottom: 1rem;"></i>
                                <h3 id="user-count">0</h3>
                                <p>Registered students</p>
                            </div>
                            <div style="background: var(--light); padding: 1.5rem; border-radius: 8px; text-align: center;">
                                <i class="fas fa-file-alt" style="font-size: 2.5rem; color: var(--primary); margin-bottom: 1rem;"></i>
                                <h3 id="completion-count">0</h3>
                                <p>Completed lessons</p>
                            </div>
                        </div>
                    </div>
                    <!-- Skills Management Section -->
                    <div id="skills-section" class="section" style="display: none;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                            <h2 class="section-title">Manage Skills</h2>
                            <button class="action-btn" onclick="addNewSkill()" style="background: var(--success);">Add New Skill</button>
                        </div>
                        <div class="skill-list" id="skillsList">
                            <!-- Skills will be loaded here -->
                        </div>
                    </div>
                    <!-- Edit Skill Form -->
                    <div id="edit-skill-form" class="edit-form">
                        <h2 class="section-title">Edit Skill</h2>
                        <div class="form-row">
                            <div class="form-col">
                                <label for="edit-skill-name">Skill Name</label>
                                <input type="text" id="edit-skill-name" placeholder="Enter skill name">
                            </div>
                            <div class="form-col">
                                <label for="edit-skill-icon">Icon Class</label>
                                <input type="text" id="edit-skill-icon" placeholder="e.g., fas fa-hammer">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-col">
                                <label for="edit-skill-description">Description</label>
                                <textarea id="edit-skill-description" placeholder="Enter skill description"></textarea>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-col">
                                <label for="edit-tools">Tools Required (comma separated)</label>
                                <textarea id="edit-tools" placeholder="Enter required tools"></textarea>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-col">
                                <label for="edit-theory">Theory Section</label>
                                <textarea id="edit-theory" placeholder="Enter theoretical content"></textarea>
                            </div>
                        </div>
                        <div class="steps-editor">
                            <h3>Steps</h3>
                            <div id="steps-container">
                                <!-- Steps will be added here -->
                            </div>
                            <button class="action-btn add-step-btn" onclick="addStep()">Add Step</button>
                        </div>
                        <div class="quiz-editor">
                            <h3>Quiz Questions</h3>
                            <div id="quiz-container">
                                <!-- Quiz questions will be added here -->
                            </div>
                            <button class="action-btn add-quiz-btn" onclick="addQuizQuestion()">Add Question</button>
                        </div>
                        <div class="form-actions">
                            <button class="action-btn" onclick="showSection('skills')" style="background: var(--gray);">Cancel</button>
                            <button class="action-btn" onclick="saveSkill()" style="background: var(--primary);">Save Changes</button>
                        </div>
                    </div>
                    <!-- Users Management Section -->
                    <div id="users-section" class="section" style="display: none;">
                        <h2 class="section-title">Manage Students</h2>
                        <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
                            <thead>
                                <tr style="background: var(--light);">
                                    <th style="padding: 0.75rem; text-align: left;">Name</th>
                                    <th style="padding: 0.75rem; text-align: left;">Rank</th>
                                    <th style="padding: 0.75rem; text-align: left;">Course</th>
                                    <th style="padding: 0.75rem; text-align: left;">Email</th>
                                    <th style="padding: 0.75rem; text-align: left;">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="users-table-body">
                                <!-- Users will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                    <!-- Settings Section -->
                    <div id="settings-section" class="section" style="display: none;">
                        <h2 class="section-title">System Settings</h2>
                        <p>System configuration options would go here in a full implementation.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ORIGINAL USER INTERFACE -->
    <main class="container" id="mainContent">
        <div id="main-content">
            <div class="skill-grid" id="skill-grid">
                <!-- Skills will be loaded here -->
            </div>
            
            <div id="skill-detail" class="skill-detail">
                <!-- Skill details will be loaded here -->
            </div>
        </div>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2026 Hand Skills Learning Platform | Master Essential Hands-On Skills</p>
        </div>
    </footer>

    <!-- ORIGINAL ADMIN PANEL (Kept for fallback if needed) -->
    <div class="admin-panel" id="adminPanelOld">
        <div class="admin-content">
            <div class="admin-header">
                <h2>Admin Panel - Edit Skills (Fallback)</h2>
                <button class="close-admin" id="closeAdminBtnOld">Close</button>
            </div>
            
            <div class="admin-section">
                <h3>Select Skill to Edit</h3>
                <select id="skillSelector" class="editor-input">
                    <option value="carpentry">Carpentry</option>
                    <option value="welding">Welding</option>
                    <option value="sewing">Sewing</option>
                    <option value="plumbing">Plumbing</option>
                    <option value="electronics">Electronics</option>
                </select>
            </div>
            
            <div class="admin-section">
                <h3>Skill Editor</h3>
                <div class="skill-editor">
                    <div class="editor-row">
                        <span class="editor-label">Name:</span>
                        <input type="text" id="skillName" class="editor-input">
                    </div>
                    <div class="editor-row">
                        <span class="editor-label">Description:</span>
                        <textarea id="skillDesc" class="editor-textarea"></textarea>
                    </div>
                    <div class="editor-row">
                        <span class="editor-label">Tools (comma separated):</span>
                        <textarea id="skillTools" class="editor-textarea"></textarea>
                    </div>
                    <div class="editor-row">
                        <span class="editor-label">Theory:</span>
                        <textarea id="skillTheory" class="editor-textarea"></textarea>
                    </div>
                </div>
            </div>
            
            <div class="admin-section">
                <h3>Steps Editor</h3>
                <div id="stepsEditorContainer">
                    <!-- Steps will be added here dynamically -->
                </div>
            </div>
            
            <div class="admin-section">
                <h3>Quiz Editor</h3>
                <div id="quizEditorContainer">
                    <!-- Quiz questions will be added here dynamically -->
                </div>
            </div>
            
            <button class="save-btn" id="saveChangesBtn">Save Changes</button>
        </div>
    </div>

    <script>
        // Data for the 5 common hand skills
        let skillsData = [
            {
                id: "carpentry",
                name: "Carpentry",
                icon: "fas fa-hammer",
                description: "The art of cutting, shaping, and installing building materials during construction.",
                tools: [
                    "Chisel Set",
                    "Hand Saw",
                    "Tape Measure",
                    "Square Ruler",
                    "Block Plane",
                    "Marking Gauge"
                ],
                steps: [
                    {
                        title: "Measure and Mark",
                        description: "Carefully measure the wood and mark cutting lines with a pencil and square.",
                        image: "https://source.unsplash.com/400x300/?ruler,wood"
                    },
                    {
                        title: "Cut to Size",
                        description: "Use a hand saw to cut the wood according to your measurements.",
                        image: "https://source.unsplash.com/400x300/?saw,cutting"
                    },
                    {
                        title: "Shape Edges",
                        description: "Smooth rough edges with a block plane for a finished look.",
                        image: "https://source.unsplash.com/400x300/?plane,tool"
                    },
                    {
                        title: "Join Pieces",
                        description: "Connect pieces using appropriate joinery techniques like dovetails or mortise and tenon.",
                        image: "https://source.unsplash.com/400x300/?joinery,woodwork"
                    }
                ],
                theory: "Carpentry involves understanding wood properties, joinery techniques, and tool maintenance. Different woods have varying grain patterns, hardness, and workability. Proper tool maintenance ensures safety and precision. Understanding wood movement helps prevent cracking and warping in finished projects.",
                quiz: [
                    {
                        question: "What is the primary purpose of a marking gauge?",
                        options: [
                            "To measure distances",
                            "To mark precise lines parallel to an edge",
                            "To check angles",
                            "To smooth surfaces"
                        ],
                        answer: 1
                    },
                    {
                        question: "Which joint is known for its strength and appearance?",
                        options: [
                            "Butt joint",
                            "Dowel joint",
                            "Dovetail joint",
                            "Pocket screw joint"
                        ],
                        answer: 2
                    }
                ]
            },
            {
                id: "welding",
                name: "Welding",
                icon: "fas fa-fire",
                description: "A fabrication process that joins materials by causing fusion, often using heat.",
                tools: [
                    "Welding Helmet",
                    "Welding Gloves",
                    "Welding Rods",
                    "Angle Grinder",
                    "Wire Brush",
                    "Clamps"
                ],
                steps: [
                    {
                        title: "Prepare Workspace",
                        description: "Ensure proper ventilation, clear workspace, and wear protective gear.",
                        image: "https://source.unsplash.com/400x300/?welding,safety"
                    },
                    {
                        title: "Clean Metal Surfaces",
                        description: "Remove rust, paint, or oil with wire brush or grinder for strong welds.",
                        image: "https://source.unsplash.com/400x300/?cleaning,metal"
                    },
                    {
                        title: "Set Up Equipment",
                        description: "Adjust amperage and select appropriate welding rod for material.",
                        image: "https://source.unsplash.com/400x300/?welder,equipment"
                    },
                    {
                        title: "Make Weld Beads",
                        description: "Apply steady motion to create consistent, strong joints.",
                        image: "https://source.unsplash.com/400x300/?welding,process"
                    }
                ],
                theory: "Welding creates permanent joints by melting base metals and adding filler material. Common types include MIG, TIG, and stick welding. Safety is paramount due to UV radiation, sparks, and toxic fumes. Understanding metal properties helps select appropriate welding parameters and techniques.",
                quiz: [
                    {
                        question: "What does MIG stand for?",
                        options: [
                            "Metal Inert Gas",
                            "Manual Internal Grinding",
                            "Multi-Integration Generator",
                            "Magnetic Impulse Gun"
                        ],
                        answer: 0
                    },
                    {
                        question: "What is the main hazard of welding?",
                        options: [
                            "Electrical shock only",
                            "UV radiation, sparks, and fumes",
                            "Noise pollution",
                            "Chemical burns"
                        ],
                        answer: 1
                    }
                ]
            },
            {
                id: "sewing",
                name: "Sewing",
                icon: "fas fa-cut",
                description: "The craft of joining fabric pieces together with thread and needle.",
                tools: [
                    "Sewing Machine",
                    "Fabric Scissors",
                    "Measuring Tape",
                    "Pins",
                    "Seam Ripper",
                    "Thimble"
                ],
                steps: [
                    {
                        title: "Select Fabric and Pattern",
                        description: "Choose appropriate fabric weight and pattern for your project.",
                        image: "https://source.unsplash.com/400x300/?fabric,textile"
                    },
                    {
                        title: "Cut Fabric Pieces",
                        description: "Carefully cut fabric according to pattern pieces using sharp scissors.",
                        image: "https://source.unsplash.com/400x300/?cutting,fabric"
                    },
                    {
                        title: "Pin Pieces Together",
                        description: "Secure fabric layers with pins before sewing to maintain alignment.",
                        image: "https://source.unsplash.com/400x300/?pinning,sewing"
                    },
                    {
                        title: "Sew Seams",
                        description: "Stitch fabric pieces together following seam allowances.",
                        image: "https://source.unsplash.com/400x300/?sewing,machine"
                    }
                ],
                theory: "Sewing involves understanding fabric properties, grain direction, and seam techniques. Different fabrics require different needles, threads, and stitch settings. Proper pressing and finishing techniques ensure professional results. Seam allowances and hemming techniques vary by garment type.",
                quiz: [
                    {
                        question: "What is the purpose of a seam ripper?",
                        options: [
                            "To measure seams",
                            "To remove stitches",
                            "To press seams flat",
                            "To hold fabric together"
                        ],
                        answer: 1
                    },
                    {
                        question: "Which direction should fabric grain run for most garments?",
                        options: [
                            "Diagonally across the body",
                            "Parallel to the body length",
                            "Perpendicular to the body length",
                            "It doesn't matter"
                        ],
                        answer: 1
                    }
                ]
            },
            {
                id: "plumbing",
                name: "Plumbing",
                icon: "fas fa-wrench",
                description: "The system of pipes, fixtures, and apparatus for conveying fluids.",
                tools: [
                    "Pipe Wrench",
                    "Plumber's Snake",
                    "Pipe Cutter",
                    "Teflon Tape",
                    "Adjustable Wrench",
                    "Plunger"
                ],
                steps: [
                    {
                        title: "Identify Problem",
                        description: "Locate the source of leaks or clogs using visual inspection and testing.",
                        image: "https://source.unsplash.com/400x300/?plumbing,problem"
                    },
                    {
                        title: "Turn Off Water Supply",
                        description: "Shut off water before beginning any repair work.",
                        image: "https://source.unsplash.com/400x300/?water,valve"
                    },
                    {
                        title: "Disassemble Components",
                        description: "Carefully remove fittings and pipes using appropriate tools.",
                        image: "https://source.unsplash.com/400x300/?pipe,disassembly"
                    },
                    {
                        title: "Install New Parts",
                        description: "Replace damaged components and reconnect with proper sealing.",
                        image: "https://source.unsplash.com/400x300/?installation,plumbing"
                    }
                ],
                theory: "Plumbing systems operate under pressure differences and gravity flow. Understanding pipe materials (PVC, copper, PEX) helps select appropriate joining methods. Proper slope prevents clogs in drain lines. Pressure regulators and shut-off valves control water flow and protect fixtures.",
                quiz: [
                    {
                        question: "What is the primary purpose of a P-trap under sinks?",
                        options: [
                            "To increase water pressure",
                            "To prevent sewer gases from entering the home",
                            "To filter debris",
                            "To reduce noise"
                        ],
                        answer: 1
                    },
                    {
                        question: "What material is commonly used for water supply lines?",
                        options: [
                            "Cast iron",
                            "PVC",
                            "Copper",
                            "Galvanized steel"
                        ],
                        answer: 2
                    }
                ]
            },
            {
                id: "electronics",
                name: "Electronics",
                icon: "fas fa-bolt",
                description: "The branch of physics dealing with electron flow in circuits.",
                tools: [
                    "Soldering Iron",
                    "Digital Multimeter",
                    "Wire Strippers",
                    "Breadboard",
                    "Desoldering Pump",
                    "Safety Glasses"
                ],
                steps: [
                    {
                        title: "Plan Circuit",
                        description: "Draw schematic and determine component placement.",
                        image: "https://source.unsplash.com/400x300/?circuit,schematic"
                    },
                    {
                        title: "Prepare Components",
                        description: "Bend leads and verify component values before installation.",
                        image: "https://source.unsplash.com/400x300/?components,electronics"
                    },
                    {
                        title: "Assemble Circuit",
                        description: "Place components on breadboard or PCB following schematic.",
                        image: "https://source.unsplash.com/400x300/?breadboard,circuit"
                    },
                    {
                        title: "Solder Connections",
                        description: "Apply heat and solder to create secure electrical connections.",
                        image: "https://source.unsplash.com/400x300/?soldering,connection"
                    }
                ],
                theory: "Electronics relies on Ohm's Law (V=IR) and Kirchhoff's laws for circuit analysis. Components include resistors, capacitors, diodes, and transistors. Digital electronics use binary logic while analog processes continuous signals. Proper grounding and decoupling prevent interference and ensure stable operation.",
                quiz: [
                    {
                        question: "What does Ohm's Law state?",
                        options: [
                            "Power equals voltage times current",
                            "Current equals voltage divided by resistance",
                            "Voltage equals current plus resistance",
                            "Resistance equals voltage minus current"
                        ],
                        answer: 1
                    },
                    {
                        question: "What is the primary function of a capacitor?",
                        options: [
                            "To store electrical charge",
                            "To convert AC to DC",
                            "To amplify signals",
                            "To measure voltage"
                        ],
                        answer: 0
                    }
                ]
            }
        ];

        // Sample users data
        let usersData = [
            {
                id: 1,
                email: "john.doe@example.com",
                rank: "Sergeant",
                name: "John Doe",
                course: "56th Mechanized Battalion",
                completedSkills: ["carpentry"]
            },
            {
                id: 2,
                email: "jane.smith@example.com",
                rank: "Corporal",
                name: "Jane Smith",
                course: "42nd Engineering Corps",
                completedSkills: ["welding", "electronics"]
            },
            {
                id: 3,
                email: "mike.jones@example.com",
                rank: "Private",
                name: "Mike Jones",
                course: "56th Mechanized Battalion",
                completedSkills: []
            }
        ];

        // Global variables
        let currentSkill = null;
        let currentEditingSkill = null;
        let currentUser = null;

        // Initialize the app when the page loads
        document.addEventListener('DOMContentLoaded', function() {
            // Always show main content first
            document.getElementById('mainContent').style.display = 'block';
            document.getElementById('adminLoginBtn').style.display = 'block';
            
            // Check if admin is logged in
            const adminLoggedIn = localStorage.getItem('adminLoggedIn') === 'true';
            if (adminLoggedIn) {
                showAdminDashboard();
            } else {
                // Show main content for non-admins
                loadSkillGrid();
            }
        });

        // Show admin dashboard
        function showAdminDashboard() {
            document.getElementById('adminDashboard').style.display = 'flex';
            document.getElementById('mainContent').style.display = 'none';
            document.getElementById('adminLoginBtn').style.display = 'none';
            loadSkillsList();
            loadUsersList();
            updateUserCounts();
            showSection('dashboard'); // Default to dashboard
        }

        // Show user interface
        function showUserInterface() {
            document.getElementById('adminDashboard').style.display = 'none';
            document.getElementById('mainContent').style.display = 'block';
            document.getElementById('adminLoginBtn').style.display = 'block';
            loadSkillGrid();
        }

        // Setup admin panel functionality
        function setupAdminPanel() {
            const adminLoginBtn = document.getElementById('adminLoginBtn');
            const closeAdminBtnOld = document.getElementById('closeAdminBtnOld');
            const saveChangesBtn = document.getElementById('saveChangesBtn');

            adminLoginBtn.addEventListener('click', function() {
                const password = prompt("Enter admin password:");
                if (password === "admin123") { // Change this to your preferred password
                    // Simulate successful login
                    localStorage.setItem('adminLoggedIn', 'true');
                    showAdminDashboard();
                } else {
                    alert("Incorrect password!");
                }
            });

            closeAdminBtnOld.addEventListener('click', function() {
                document.getElementById('adminPanelOld').style.display = 'none';
            });

            saveChangesBtn.addEventListener('click', function() {
                saveSkillChangesOld();
            });
        }

        // Admin logout
        function logout() {
            localStorage.removeItem('adminLoggedIn');
            localStorage.removeItem('userLoggedIn');
            localStorage.removeItem('currentUser');
            currentUser = null;
            document.getElementById('adminDashboard').style.display = 'none';
            document.getElementById('mainContent').style.display = 'block';
            document.getElementById('adminLoginBtn').style.display = 'block';
            loadSkillGrid(); // Reload main content
        }

        // Show different sections in admin panel
        function showSection(section) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(el => el.style.display = 'none');
            document.getElementById('edit-skill-form').style.display = 'none';
            // Remove active class from all nav items
            document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active'));
            // Show selected section and highlight nav item
            document.getElementById(`${section}-section`).style.display = 'block';
            document.querySelector(`.nav-item[onclick="showSection('${section}')"]`).classList.add('active');
            // Load users if on users section
            if (section === 'users') {
                loadUsersList();
            }
        }

        // Load skills list in admin panel
        function loadSkillsList() {
            const skillsList = document.getElementById('skillsList');
            skillsList.innerHTML = '';
            skillsData.forEach(skill => {
                const skillCard = document.createElement('div');
                skillCard.className = 'skill-card';
                skillCard.innerHTML = `
                    <h4>${skill.name}</h4>
                    <p>${skill.description.substring(0, 100)}...</p>
                    <div class="skill-actions">
                        <button class="action-btn edit-btn" onclick="editSkill('${skill.id}')">Edit</button>
                        <button class="action-btn delete-btn" onclick="deleteSkill('${skill.id}')">Delete</button>
                    </div>
                `;
                skillsList.appendChild(skillCard);
            });
        }

        // Load users list in admin panel
        function loadUsersList() {
            const usersTableBody = document.getElementById('users-table-body');
            usersTableBody.innerHTML = '';
            usersData.forEach(user => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td style="padding: 0.75rem; border-bottom: 1px solid #eee;">${user.name}</td>
                    <td style="padding: 0.75rem; border-bottom: 1px solid #eee;">${user.rank}</td>
                    <td style="padding: 0.75rem; border-bottom: 1px solid #eee;">${user.course}</td>
                    <td style="padding: 0.75rem; border-bottom: 1px solid #eee;">${user.email}</td>
                    <td style="padding: 0.75rem; border-bottom: 1px solid #eee;">
                        <button class="action-btn delete-btn" onclick="deleteUser(${user.id})">Delete</button>
                    </td>
                `;
                usersTableBody.appendChild(row);
            });
        }

        // Update dashboard counters
        function updateUserCounts() {
            document.getElementById('user-count').textContent = usersData.length;
            // Calculate completed lessons
            let completedCount = 0;
            usersData.forEach(user => {
                completedCount += user.completedSkills.length;
            });
            document.getElementById('completion-count').textContent = completedCount;
        }

        // Add new skill
        function addNewSkill() {
            currentEditingSkill = {
                id: '',
                name: '',
                icon: 'fas fa-tools',
                description: '',
                tools: [],
                steps: [],
                theory: '',
                quiz: []
            };
            showEditForm();
        }

        // Edit existing skill
        function editSkill(skillId) {
            currentEditingSkill = skillsData.find(skill => skill.id === skillId);
            if (currentEditingSkill) {
                showEditForm();
            }
        }

        // Show edit form
        function showEditForm() {
            document.getElementById('edit-skill-name').value = currentEditingSkill.name;
            document.getElementById('edit-skill-icon').value = currentEditingSkill.icon;
            document.getElementById('edit-skill-description').value = currentEditingSkill.description;
            document.getElementById('edit-tools').value = currentEditingSkill.tools.join(', ');
            document.getElementById('edit-theory').value = currentEditingSkill.theory;
            
            // Populate steps
            const stepsContainer = document.getElementById('steps-container');
            stepsContainer.innerHTML = '';
            currentEditingSkill.steps.forEach((step, index) => {
                addStepToForm(index, step);
            });
            
            // Populate quiz
            const quizContainer = document.getElementById('quiz-container');
            quizContainer.innerHTML = '';
            currentEditingSkill.quiz.forEach((question, index) => {
                addQuizQuestionToForm(index, question);
            });
            
            // Show form
            document.getElementById('skills-section').style.display = 'none';
            document.getElementById('edit-skill-form').style.display = 'block';
        }

        // Add step to form
        function addStepToForm(index, step = null) {
            const stepsContainer = document.getElementById('steps-container');
            const stepId = index !== undefined ? index : currentEditingSkill.steps.length;
            const stepObj = step || {
                title: '',
                description: '',
                image: ''
            };

            const stepElement = document.createElement('div');
            stepElement.className = 'step-item';
            stepElement.id = `step-${stepId}`;
            stepElement.innerHTML = `
                <div class="step-header">
                    <h4>Step ${stepId + 1}</h4>
                    <button class="action-btn delete-btn" onclick="removeStep(${stepId})">Remove</button>
                </div>
                <div class="step-content">
                    <div>
                        <label>Title</label>
                        <input type="text" value="${stepObj.title}" onchange="updateStepField(${stepId}, 'title', this.value)" placeholder="Step title">
                    </div>
                    <div>
                        <label>Description</label>
                        <textarea onchange="updateStepField(${stepId}, 'description', this.value)" placeholder="Step description">${stepObj.description}</textarea>
                    </div>
                    <div>
                        <label>Image URL</label>
                        <input type="text" value="${stepObj.image}" onchange="updateStepField(${stepId}, 'image', this.value)" placeholder="Image URL">
                    </div>
                </div>
            `;
            stepsContainer.appendChild(stepElement);
        }

        // Add new step
        function addStep() {
            if (!currentEditingSkill.steps) currentEditingSkill.steps = [];
            currentEditingSkill.steps.push({
                title: '',
                description: '',
                image: ''
            });
            addStepToForm();
        }

        // Update step field
        function updateStepField(index, field, value) {
            if (currentEditingSkill.steps[index]) {
                currentEditingSkill.steps[index][field] = value;
            }
        }

        // Remove step
        function removeStep(index) {
            if (currentEditingSkill.steps && currentEditingSkill.steps[index]) {
                currentEditingSkill.steps.splice(index, 1);
                // Re-render all steps
                const stepsContainer = document.getElementById('steps-container');
                stepsContainer.innerHTML = '';
                currentEditingSkill.steps.forEach((step, idx) => {
                    addStepToForm(idx, step);
                });
            }
        }

        // Add quiz question to form
        function addQuizQuestionToForm(index, question = null) {
            const quizContainer = document.getElementById('quiz-container');
            const questionId = index !== undefined ? index : currentEditingSkill.quiz.length;
            const q = question || {
                question: '',
                options: ['', '', '', ''],
                answer: 0
            };

            const questionElement = document.createElement('div');
            questionElement.className = 'quiz-question';
            questionElement.id = `question-${questionId}`;
            questionElement.innerHTML = `
                <div class="step-header">
                    <h4>Question ${questionId + 1}</h4>
                    <button class="action-btn delete-btn" onclick="removeQuizQuestion(${questionId})">Remove</button>
                </div>
                <div>
                    <label>Question</label>
                    <input type="text" value="${q.question}" onchange="updateQuizField(${questionId}, 'question', this.value)" placeholder="Question text">
                </div>
                <div class="quiz-options">
                    <div>
                        <label>Option A</label>
                        <input type="text" value="${q.options[0]}" onchange="updateQuizOption(${questionId}, 0, this.value)" placeholder="Option A">
                    </div>
                    <div>
                        <label>Option B</label>
                        <input type="text" value="${q.options[1]}" onchange="updateQuizOption(${questionId}, 1, this.value)" placeholder="Option B">
                    </div>
                    <div>
                        <label>Option C</label>
                        <input type="text" value="${q.options[2]}" onchange="updateQuizOption(${questionId}, 2, this.value)" placeholder="Option C">
                    </div>
                    <div>
                        <label>Option D</label>
                        <input type="text" value="${q.options[3]}" onchange="updateQuizOption(${questionId}, 3, this.value)" placeholder="Option D">
                    </div>
                </div>
                <div>
                    <label>Correct Answer (0=A, 1=B, 2=C, 3=D)</label>
                    <input type="number" min="0" max="3" value="${q.answer}" onchange="updateQuizField(${questionId}, 'answer', parseInt(this.value))">
                </div>
            `;
            quizContainer.appendChild(questionElement);
        }

        // Add new quiz question
        function addQuizQuestion() {
            if (!currentEditingSkill.quiz) currentEditingSkill.quiz = [];
            currentEditingSkill.quiz.push({
                question: '',
                options: ['', '', '', ''],
                answer: 0
            });
            addQuizQuestionToForm();
        }

        // Update quiz field
        function updateQuizField(questionId, field, value) {
            if (currentEditingSkill.quiz[questionId]) {
                currentEditingSkill.quiz[questionId][field] = value;
            }
        }

        // Update quiz option
        function updateQuizOption(questionId, optionIndex, value) {
            if (currentEditingSkill.quiz[questionId] && currentEditingSkill.quiz[questionId].options[optionIndex] !== undefined) {
                currentEditingSkill.quiz[questionId].options[optionIndex] = value;
            }
        }

        // Remove quiz question
        function removeQuizQuestion(index) {
            if (currentEditingSkill.quiz && currentEditingSkill.quiz[index]) {
                currentEditingSkill.quiz.splice(index, 1);
                // Re-render all questions
                const quizContainer = document.getElementById('quiz-container');
                quizContainer.innerHTML = '';
                currentEditingSkill.quiz.forEach((question, idx) => {
                    addQuizQuestionToForm(idx, question);
                });
            }
        }

        // Save skill
        function saveSkill() {
            // Update current skill with form values
            currentEditingSkill.name = document.getElementById('edit-skill-name').value;
            currentEditingSkill.icon = document.getElementById('edit-skill-icon').value;
            currentEditingSkill.description = document.getElementById('edit-skill-description').value;
            currentEditingSkill.tools = document.getElementById('edit-tools').value.split(',').map(t => t.trim()).filter(t => t);
            currentEditingSkill.theory = document.getElementById('edit-theory').value;

            // If it's a new skill, generate ID
            if (!currentEditingSkill.id) {
                currentEditingSkill.id = currentEditingSkill.name.toLowerCase().replace(/\s+/g, '-');
            }

            // Find if skill already exists
            const existingIndex = skillsData.findIndex(s => s.id === currentEditingSkill.id);
            if (existingIndex !== -1) {
                // Update existing skill
                skillsData[existingIndex] = currentEditingSkill;
            } else {
                // Add new skill
                skillsData.push(currentEditingSkill);
            }

            // Show success message
            alert('Skill saved successfully!');

            // Go back to skills list
            document.getElementById('edit-skill-form').style.display = 'none';
            document.getElementById('skills-section').style.display = 'block';

            // Reload skills list
            loadSkillsList();
        }

        // Delete skill
        function deleteSkill(skillId) {
            if (confirm('Are you sure you want to delete this skill?')) {
                skillsData = skillsData.filter(skill => skill.id !== skillId);
                loadSkillsList();
            }
        }

        // Delete user
        function deleteUser(userId) {
            if (confirm('Are you sure you want to delete this user?')) {
                usersData = usersData.filter(user => user.id !== userId);
                loadUsersList();
                updateUserCounts();
            }
        }

        // --- OLD ADMIN FUNCTIONALITY (for fallback) ---
        function saveSkillChangesOld() {
            // Get skill ID from selector
            const skillId = document.getElementById('skillSelector').value;
            const skill = skillsData.find(s => s.id === skillId);
            
            if (!skill) return;

            // Update basic info
            skill.name = document.getElementById('skillName').value;
            skill.description = document.getElementById('skillDesc').value;
            skill.tools = document.getElementById('skillTools').value.split(',').map(t => t.trim());
            skill.theory = document.getElementById('skillTheory').value;

            // Update steps - simplified for old panel
            // (In a real implementation, you would need to handle steps similarly)
            // For now, we'll just reload the grid
            loadSkillGrid();
            alert("Changes saved successfully!");
        }

        // Load the main skill grid
        function loadSkillGrid() {
            const gridElement = document.getElementById('skill-grid');
            let html = '';
            
            skillsData.forEach(skill => {
                html += `
                    <div class="skill-card-ui" onclick="loadSkillDetail('${skill.id}')">
                        <div class="skill-icon">
                            <i class="${skill.icon}"></i>
                        </div>
                        <div class="skill-content">
                            <h3 class="skill-name">${skill.name}</h3>
                            <p class="skill-desc">${skill.description}</p>
                            <button class="skill-btn">Learn Now</button>
                        </div>
                    </div>
                `;
            });
            
            gridElement.innerHTML = html;
        }

        // Load detail view for a specific skill
        function loadSkillDetail(skillId) {
            document.getElementById('skill-grid').style.display = 'none';
            document.getElementById('skill-detail').style.display = 'block';
            
            const skill = skillsData.find(s => s.id === skillId);
            if (!skill) {
                alert('Skill not found');
                return;
            }
            
            currentSkill = skill;
            
            let html = `
                <div class="skill-header">
                    <i class="${skill.icon}"></i>
                    <h2>${skill.name}</h2>
                </div>
                
                <div class="skill-section">
                    <h3 class="section-title-ui">Required Tools</h3>
                    <div class="tools-grid">
            `;
            
            skill.tools.forEach(tool => {
                html += `
                    <div class="tool-item">
                        <i class="fas fa-toolbox"></i>
                        <div>${tool}</div>
                    </div>
                `;
            });
            
            html += `
                    </div>
                </div>
                
                <div class="skill-section">
                    <h3 class="section-title-ui">Step-by-Step Guide</h3>
                    <div class="steps-container">
            `;
            
            skill.steps.forEach(step => {
                html += `
                    <div class="step-card">
                        <img src="${step.image}" alt="${step.title}" class="step-image">
                        <div class="step-content">
                            <h4 class="step-title">${step.title}</h4>
                            <p>${step.description}</p>
                        </div>
                    </div>
                `;
            });
            
            html += `
                    </div>
                </div>
                
                <div class="skill-section">
                    <h3 class="section-title-ui">Theory & Principles</h3>
                    <div class="theory-content">
                        <p>${skill.theory}</p>
                    </div>
                </div>
                
                <div class="skill-section">
                    <h3 class="section-title-ui">Knowledge Check</h3>
                    <div class="quiz-container" id="quiz-container">
            `;
            
            skill.quiz.forEach((q, index) => {
                html += `
                    <div class="question">
                        <div class="question-text">${q.question}</div>
                        <div class="options">
                `;
                
                q.options.forEach((opt, optIndex) => {
                    html += `
                        <div class="option" data-question="${index}" data-option="${optIndex}">
                            <input type="radio" name="q${index}" id="q${index}o${optIndex}">
                            <label for="q${index}o${optIndex}">${String.fromCharCode(65 + optIndex)}. ${opt}</label>
                        </div>
                    `;
                });
                
                html += `
                        </div>
                        <div class="quiz-result" id="result-${index}" style="display:none;"></div>
                    </div>
                `;
            });
            
            html += `
                    </div>
                    <div class="quiz-nav">
                        <button class="back-btn" onclick="goBackToGrid()"> Back to Skills</button>
                        <button class="skill-btn" onclick="checkQuiz()">Check Answers</button>
                    </div>
                </div>
            `;
            
            document.getElementById('skill-detail').innerHTML = html;
            
            // Add event listeners for quiz options
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    const questionIndex = this.dataset.question;
                    const optionIndex = this.dataset.option;
                    
                    // Remove selected class from all options in this question
                    document.querySelectorAll(`.option[data-question="${questionIndex}"]`).forEach(opt => {
                        opt.classList.remove('selected');
                    });
                    
                    // Add selected class to clicked option
                    this.classList.add('selected');
                });
            });
        }

        // Check quiz answers
        function checkQuiz() {
            const quiz = currentSkill.quiz;
            let score = 0;
            
            quiz.forEach((q, index) => {
                const selectedOption = document.querySelector(`.option[data-question="${index}"].selected`);
                
                if (selectedOption) {
                    const selectedValue = parseInt(selectedOption.dataset.option);
                    const resultDiv = document.getElementById(`result-${index}`);
                    
                    if (selectedValue === q.answer) {
                        resultDiv.textContent = 'Correct!';
                        resultDiv.className = 'quiz-result correct';
                        score++;
                    } else {
                        resultDiv.textContent = `Incorrect. Correct answer: ${String.fromCharCode(65 + q.answer)}`;
                        resultDiv.className = 'quiz-result incorrect';
                    }
                    
                    resultDiv.style.display = 'block';
                }
            });
            
            // Show overall score
            const totalQuestions = quiz.length;
            const percentage = Math.round((score / totalQuestions) * 100);
            
            alert(`Quiz completed!\nScore: ${score}/${totalQuestions} (${percentage}%)`);
        }

        // Go back to skill grid
        function goBackToGrid() {
            document.getElementById('skill-grid').style.display = 'grid';
            document.getElementById('skill-detail').style.display = 'none';
        }
    </script>
</body>
</html>
